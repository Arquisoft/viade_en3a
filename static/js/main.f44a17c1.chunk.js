(this.webpackJsonpviade_en3a=this.webpackJsonpviade_en3a||[]).push([[0],{1023:function(e,t,n){},1024:function(e,t,n){},1025:function(e,t,n){},1026:function(e,t,n){},1030:function(e,t,n){},1031:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(81),o=n.n(i),s=n(273),u=n(19),c=n(483);s.a.use(c.a).use(u.b).init({resources:{en:{translation:{carouselWelcome:"Welcome to Viade",carouselText1:"Your routes app",carouselText2:"Store your routes, create new ones",carouselText3:"High versatility",navBarLanguageEn:"English",navBarLanguageEs:"Spanish",navBarLanguage:"Language",navBarSignUp:"Sign up",navBarSignIn:"Sign in",navBarSignOut:"Sign out",navBarProfile:"Profile",navBarMyProfile:"My profile",navBarFriends:"Friends",navBarGroups:"My groups",navBarSettings:"Settings",navBarRoutes:"Route management",navBarMyRoutes:"My routes",navBarCreateRoute:"Create a new route",navBarSharedRoutes:"Shared to Me",navBarRouteHelp:"How do routes work?",routeListText:"Route List",friendCardProfile:"Profile",pageNotFoundHeader:"Oops! The page you are trying to access does not exist.",pageNotFoundText1:"You can return to homepage ",pageNotFoundText2:"here.",registerFormTitle:"Get your own SOLID pod",registerFormText:"Get your SOLID pod from one of these identity providers",editProfileTitle:"Edit profile info",editProfileChangeName:"Change name",editProfileNewName:"New name",editProfileMinChar:"Min of 8 characters",editProfileChangePass:"Change password",editProfileNewPass:"New password",editProfileSave:"Save",homeWelcome:"Hi ",homeWelcome2:"welcome to",profileTitle:"Your Profile",profileUsername:"Username:",profileAddress:"Address:",profileEmail:"Email:",profilePhone:"Phone:",profileEditButton:"Edit profile",profileLastRoutes:"Last routes done",infoViewTitle:"Route Info",infoViewExportJSON:"Export route in json format",infoViewTh1:"Info",infoViewTh2:"Data",infoViewTd1:"Name:",infoViewTd2:"Author:",infoViewTd3:"Description:",infoViewTd4:"Distance:",infoViewComments:"Comment section",infoViewWriteComments:"Write your comment here",infoViewSubmit:"Submit",infoViewMap:"Map view",infoViewElevation:"Elevation chart",infoViewImg:"Image gallery",mapCreationTitle:"Create your own Route",mapCreationName:"Route Name",mapCreationNamePlaceholder:"Type in new route name",mapCreationRouteDescription:"Route Description",mapCreationRouteDescriptionPlaceholder:"(Optional) Type a description of the route",mapCreationSaveButton:"Save route in pod",mapCreationSearchBarFound:"Found! ",mapCreationSearchBarError:"We are sorry! We didn't find that place. Please, try with a different one",friendsTitle:"Friends",friendsAdd:"Add a friend",friendsList:"List of friends",groupsTitle:"Groups of friends",groupsCreate:"Create group",groupsAdd:"Add",groupsAdded:"Added",groupsCreateBtn:"Create",routeListLoadingMessage:"We're downloading your routes. Next time will be faster.",routeHelpIndex:"Index",routeHelpIntro:"Introduction",routeHelpIntro_1:"Viade is an Application whose task is to manage routes.",routeHelpIntro_2:"It allows you to store your favourite scenic routes on your Solid Pod and to share it with your friends and family as well as comment on those of your friends'.",routeHelpCreatePOD:"Create a POD",routeHelpCreatePOD_1:"If you are not an owner of a POD you can create one by pressing the register button. This will redirect you to a provider, where you can create your POD.",routeHelpLogin:"Login",routeHelpLogin_1:"Once the POD is created, press the login button and a popup will ask you for credentials. Once logged in you will have access to new options.",routeHelpCreateRoutes:"Create a Route",routeHelpCreateRoutes_1:'From "Route Management > Create a new Route" you can create a new route. Just set a title, description, select the waypoints of the route and press "Save route in POD".',routeHelpViewRoutes:"View your Routes",routeHelpViewRoutes_1:'We can now navigate to "Route Management > My Routes", where the routes you have created are listed. When clicking on "Info" of the new route a new window will display all the information recorded, as well as comments posted and a elevation chart of the waypoints.',routeHelpShareRoutes:"Share with Friends",routeHelpShareRoutes_1:'When displaying all routes "Route Management > My Routes", you can click on the share option. This will list all friends and when clicking share, a message with the route will be sent to the inbox of your friend.',alertName:"Name can't be empty",alertPoints:"Routes must have at least two points",alertAccessPOD:"We can't access your POD. Please, review its permissions",alertMembers:"A group must have at least one member",alertAlreadyIncluded:" already included",alertAddedSuccessfully:" added successfully",alertErrorInPermissions:"Unable to share your route. Your friend does not allow sharing",alertSuccessInPermissions:"Your route was successfully shared!",alertNoInputOnSearch:"Oopss... At least try to search for some place :D",searching:"Searching...",alertUnableToRetrieveRoute:"There was an error trying to show the information for this route",alertUnavailableRoutes:"One of your friends erased a route shared to you. Go to Shared routes and remove them to discard this message",alertRoutesRemoved:"Routes Eliminated!",messageNoGroups:"You have no groups created yet!",messageNoGroupsCreateOne:"Click on the button and create one!",sharedRouteListTitle:"Shared route list",routeListOoopsTitle:"Oops! We didn't find any route in your POD",routeListOoopsParagraph:'You can move to "Route management >> Create a new route" to add a new route!',sharedRouteListOoopsTitle:"Oops! It seems that you haven't been shared any route yet. Sad...",sharedRouteListOoopsParagraph:"You can ask some friend to share one to you",infoViewCommentsNotYetImplemented:"This functionality is not currently being supported. We are sorry for the inconvenieces.",routeCreationElevationPreviewTitle:"Route elevation preview",info:"Info",share:"Share",routeName:"Route Name:",routeNamePlaceholder:"Type in route name",routeDescription:"Route Description:",routeDescriptionPlaceholder:"Write here an optional description of the route",fileUpload:"File Upload: ",fileUploadLabel:"You can upload more than one file",searchBarLabel:"Search for a place:",latitude:"Latitude",longitude:"Longitude",name:"Name",description:"Description",actions:"Actions",editMessage:"Click over a point to edit it",grupos:"Groups",invalidRoute:"Route with invalid format ignored"}},es:{translation:{carouselWelcome:"Bienvenido a Viade",carouselText1:"Tu aplicaci\xf3n de rutas",carouselText2:"Guarda tus rutas, crea nuevas",carouselText3:"Alta versatilidad",navBarLanguageEn:"Ingl\xe9s",navBarLanguageEs:"Espa\xf1ol",navBarLanguage:"Idioma",navBarSignUp:"Registrarse",navBarSignIn:"Identificarse",navBarSignOut:"Cerrar sesi\xf3n",navBarProfile:"Perfil",navBarMyProfile:"Mi perfil",navBarGroups:"Mis grupos",navBarFriends:"Amigos",navBarSettings:"Ajustes",navBarRoutes:"Gesti\xf3n de rutas",navBarMyRoutes:"Mis rutas",navBarCreateRoute:"Crear una nueva ruta",navBarSharedRoutes:"Compartidas conmigo",navBarRouteHelp:"\xbfC\xf3mo funcionan las rutas?",routeListText:"Lista de rutas",friendCardProfile:"Perfil",pageNotFoundHeader:"\xa1Vaya! La p\xe1gina a la que est\xe1s intentando acceder no existe.",pageNotFoundText1:"Puedes volver a la p\xe1gina principal ",pageNotFoundText2:"aqu\xed.",registerFormTitle:"Obt\xe9n tu pod SOLID",registerFormText:"Obt\xe9n tu identidad solid de uno de los siguientes proveedores",editProfileTitle:"Editar informaci\xf3n de perfil",editProfileChangeName:"Cambiar nombre",editProfileNewName:"Nuevo nombre",editProfileMinChar:"M\xednimo de 8 caracteres",editProfileChangePass:"Cambiar contrase\xf1a",editProfileNewPass:"Nueva contrase\xf1a",editProfileSave:"Guardar",homeWelcome:"Hola ",homeWelcome2:"bienvenido a",profileTitle:"Tu Perfil",profileUsername:"Usuario:",profileAddress:"Direcci\xf3n:",profileEmail:"Correo:",profilePhone:"Tel\xe9fono:",profileEditButton:"Editar perfil",profileLastRoutes:"\xdaltimas rutas realizadas",infoViewTitle:"Informaci\xf3n de la ruta",infoViewExportJSON:"Exportar ruta en formato json",infoViewTh1:"Info",infoViewTh2:"Datos",infoViewTd1:"Nombre:",infoViewTd2:"Autor:",infoViewTd3:"Descripci\xf3n:",infoViewTd4:"Distancia:",infoViewComments:"Comentarios",infoViewWriteComments:"Escribe tu comentario aqu\xed",infoViewSubmit:"Publicar",infoViewMap:"Vista del mapa",infoViewElevation:"Perfil de elevaci\xf3n",infoViewImg:"Galer\xeda de im\xe1genes",mapCreationTitle:"Crea tu propia ruta",mapCreationName:"Nombre de ruta",mapCreationNamePlaceholder:"Escribe el nombre de tu nueva ruta",mapCreationRouteDescription:"Descripci\xf3n",mapCreationRouteDescriptionPlaceholder:"(Opcional) Escribe una descripci\xf3n sobre la ruta",mapCreationSaveButton:"Guardar ruta en pod",mapCreationSearchBarFound:"\xa1Listo! ",mapCreationSearchBarError:"\xa1Lo sentimos! No hemos podido encontrar ese lugar. Por favor, int\xe9ntalo de nuevo con otro lugar",friendsTitle:"Amigos",friendsAdd:"A\xf1adir un amigo",friendsList:"Lista de amigos",groupsTitle:"Grupos de amigos",groupsCreate:"Crear grupo",groupsAdd:"A\xf1adir",groupsAdded:"A\xf1adido",groupsCreateBtn:"Crear",routeListLoadingMessage:"Estamos descargando sus rutas. La pr\xf3xima vez tardar\xe1 menos.",routeHelpIndex:"\xcdndice",routeHelpIntro:"Introducci\xf3n",routeHelpIntro_1:"Viade es una aplicaci\xf3n de Administraci\xf3n de Rutas.",routeHelpIntro_2:"Te permite almacenar tus rutas de monta\xf1a favoritas en tu POD de Solid y compartirlas con tus amigos y familia a la par que comentar sobre ellas.",routeHelpCreatePOD:"Crear un POD",routeHelpCreatePOD_1:"Si todav\xeda no tienes un POD, puedes hacerte a uno pulsando el bot\xf3n de registrar. Esto te redirigir\xe1 a un proveedor, donde podr\xe1s crear tu POD.",routeHelpLogin:"Iniciar Sesi\xf3n",routeHelpLogin_1:"Una vez tengas un POD, pulsa el bot\xf3n 'Identificarse' y una ventana te pedir\xe1 credenciales. Una vez tengas la sesi\xf3n uniciada dispondr\xe1s de m\xe1s opciones.",routeHelpCreateRoutes:"Crear una Ruta",routeHelpCreateRoutes_1:'Desde "Gesti\xf3n de Rutas > Crear una Nueva Ruta" puedes crear rutas nuevas. Escoge un t\xedtulo, descripci\xf3n, los puntos por donde pasa y pulsa "Guardar ruta en POD".',routeHelpViewRoutes:"Ver tus Rutas",routeHelpViewRoutes_1:'Puedes navegar a "Gesti\xf3n de Rutas > Mis rutas", donde se mostrar\xe1 un listado de las rutas que hayas creado. Cuando se seleccione "Info" de la nueva ruta una ventana mostrar\xe1 toda la informaci\xf3n guardada, as\xed como comentarios de la ruta o un gr\xe1fica de elevaci\xf3n de los puntos por donde pasa.',routeHelpShareRoutes:"Compartir con los Amigos",routeHelpShareRoutes_1:'Cuando se muestran todas tus rutas "Gesti\xf3n de Rutas > Mis rutas", puedes pulsar en la opci\xf3n de compartir. Esto listar\xe1 a todos tus amigos y al pulsar sobre uno de ellos se les enviar\xe1 un mensaje a "Inbox".',alertName:"El nombre no puede estar vac\xedo",alertPoints:"La ruta debe contener al menos dos puntos",alertAccessPOD:"No podemos acceder a su POD. Por favor, compruebe sus permisos",alertMembers:"El grupo debe tener al menos un miembro",alertAlreadyIncluded:" ya est\xe1 incluido",alertAddedSuccessfully:" a\xf1adido correctamente",alertErrorInPermissions:"Imposible compartir la ruta. Tu amigo no permite esta acci\xf3n",alertSuccessInPermissions:"Tu ruta ha sido compartida con \xe9xito",alertNoInputOnSearch:"Oopss... Debes indicar un sitio para poder buscarlo :D",searching:"Buscando...",alertUnableToRetrieveRoute:"Hubo un error tratando de mostrar la informaci\xf3n sobre la ruta",alertUnavailableRoutes:"Uno de tus amigos elimino una o varias rutas que te hab\xeda compartido. Ve a la secci\xf3n de rutas compartidas y eliminalas para descartar este mensaje",alertRoutesRemoved:"\xa1Rutas eliminadas!",messageNoGroups:"\xa1Todav\xeda no has creado ningun grupo!",messageNoGroupsCreateOne:"Pulsa en el bot\xf3n y crea uno",sharedRouteListTitle:"Lista de routas compartidas",routeListOoopsTitle:"\xa1Vaya! No hemos podido encontrar ninguna ruta en tu POD",routeListOoopsParagraph:'\xa1Puedes usar la vista de creaci\xf3n de rutas "Gesti\xf3n de rutas >> Crear una nueva ruta" para a\xf1adir una nueva!',sharedRouteListOoopsTitle:"\xa1Vaya! Parece que no se te ha compartido ninguna ruta todav\xeda. Triste, socio...",sharedRouteListOoopsParagraph:"Puedes pedirle alg\xfan amigo o amiga que te comparta una para verla aqu\xed",infoViewCommentsNotYetImplemented:"Esta funcionalidad todav\xeda no est\xe1 soportada. Nos disculpamos por los inconvenientes que esto pueda causar.",routeCreationElevationPreviewTitle:"Vista previa del perfil altim\xe9trico",info:"Info",share:"Compartir",routeName:"Nombre de la ruta:",routeNamePlaceholder:"Introduce el nombre de la ruta",routeDescription:"Descripci\xf3n de la ruta:",routeDescriptionPlaceholder:"Escribe una descripci\xf3n opcional de la ruta",fileUpload:"Subida de Archivos: ",fileUploadLabel:"Puedes subir m\xe1s de un archivo",searchBarLabel:"Buscar:",latitude:"Latitud",longitude:"Longitud",name:"Nombre",description:"Descripci\xf3n",actions:"Acciones",editMessage:"Pincha sobre un punto para editarlo",grupos:"Grupos",invalidRoute:"Ruta con formato inv\xe1lido ignorada"}}},fallbackLng:"en",interpolation:{escapeValue:!1}});var l=s.a,d=(n(148),n(84)),p=n(73),h=n(75),m=n(212),f=n(50),v=n(1044),g=n(141),b=n(105),y=n(41),E=n(42);var w=function(e){var t=Object(u.c)().t;return r.a.createElement(y.a,{bg:"light",style:{color:"black",width:"18rem",display:"inline-block"}},r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,t("registerFormTitle")),r.a.createElement(y.a.Text,null,t("registerFormText")),r.a.createElement(E.a,{variant:"primary",href:"https://inrupt.net/register",block:!0},"Inrupt"),r.a.createElement(E.a,{variant:"primary",href:"https://solid.community/register",block:!0},"React Community")))};var k=function(e){return r.a.createElement("div",{className:"App-header"},r.a.createElement(w,null))},x=n(1),O=n.n(x),S=n(12),R=n(9),C=n(10),j=n(17),I=n(16),P=n(18),N=n(1040),F=n(21),T=n(1045),A=n(1047),L=n(1038),B=n(1039),D=n(28),M=n.n(D),H=function(){function e(t,n,a,r,i){Object(R.a)(this,e),this.lat=t,this.lng=n,this.index=a,this.name=r,this.description=i,this.edited=!1}return Object(C.a)(e,[{key:"printLat",value:function(){return this.lat.toFixed(2)}},{key:"printLng",value:function(){return this.lng.toFixed(2)}},{key:"setName",value:function(e){this.name=e}},{key:"setDescription",value:function(e){this.description=e}},{key:"toString",value:function(){return this.lat+" "+this.lng+" "+this.index+" "+this.name}}]),e}(),G=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(j.a)(this,Object(I.a)(t).call(this,e))).addPoint=function(e){a.initial&&(a.state.points.pop(),a.initial=!1),a.state.points.push(new H(e.latlng.lat,e.latlng.lng,a.state.points.length,void 0,void 0)),a.setState({points:a.state.points.slice()}),a.onChange(a.getPoints())},a.updatePoint=function(e){var t=e.target.options.marker_index,n=e.target.getLatLng(),r=a.state.points;r[t].lat=n.lat,r[t].lng=n.lng,a.setState({points:r.slice()}),a.onChange(a.getPoints())},a.setPositionScaled=function(e){a.map.current.leafletElement.fitBounds(a.state.boundingbox)},a.showPoint=function(e){var t=e.target.options.marker_index;e.target.setIcon(a.selectedIcon),a.selected=t,a.pointInfo.current.setPoint(Object.assign({},a.state.points[t])),a.setState({points:a.state.points.slice()})},a.state={points:[new H(0,0,0,void 0)],editablePosition:[43.354834,-5.851405],boundingbox:[43.254834,-5.751405,43.454834,-5.951405]},a.initial=!0,a.onChange=e.onChange,a.pointInfo=e.pointInfo,a.selected=void 0,a.normalIcon=M.a.icon({iconUrl:n(277),iconSize:[64,64],iconAnchor:[32,54],popupAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null}),a.selectedIcon=M.a.icon({iconUrl:n(524),iconSize:[64,64],iconAnchor:[32,54],popupAnchor:[64,64],shadowUrl:null,shadowSize:null,shadowAnchor:null}),a.editedIcon=M.a.icon({iconUrl:n(278),iconSize:[64,64],iconAnchor:[32,54],popupAnchor:[64,64],shadowUrl:null,shadowSize:null,shadowAnchor:null}),a}return Object(P.a)(t,e),Object(C.a)(t,[{key:"getPoints",value:function(){var e=[];return this.state.points.forEach((function(t){return e.push({lat:t.lat,lng:t.lng})})),e}},{key:"updatePointNameDescription",value:function(e,t,n){var a=this.state.points.find((function(t){return t.index===e.index}));a.name=t,a.description=n,a.edited=!0}},{key:"remove",value:function(e){var t=this.state.points,n=t.find((function(t){return t.index===e.index})),a=t.indexOf(n);t.splice(a,1),this.setState({points:t.slice()}),this.onChange(this.getPoints()),this.pointInfo.current.setPoint(void 0),this.selected=void 0}},{key:"getIcon",value:function(e){return this.selected===e?this.selectedIcon:this.state.points[e].edited?this.editedIcon:this.normalIcon}},{key:"render",value:function(){var e=this;return r.a.createElement(T.a,{center:this.state.editablePosition,zoom:12,style:{width:"50vw",height:"50vh"},onClick:this.addPoint},r.a.createElement(A.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(L.a,{positions:this.state.points,color:"red"}),this.state.points.map((function(t,n){return r.a.createElement(B.a,{marker_index:n,position:{lat:t.lat,lng:t.lng},draggable:!0,ondrag:e.updatePoint,onClick:e.showPoint,icon:e.getIcon(n)})})))}}]),t}(r.a.Component),V=n(288),U=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(R.a)(this,e),this.latitude=t,this.longitude=n,this.elevation=a,this.name=r,this.description=i}return Object(C.a)(e,[{key:"getElevation",value:function(){return this.elevation}},{key:"getLatitude",value:function(){return this.latitude}},{key:"getLongitude",value:function(){return this.longitude}},{key:"setElevation",value:function(e){this.elevation=e}},{key:"askForElevation",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:function(e){},-1===this.elevation&&fetch("https://api.airmap.com/elevation/v1/ele/?points="+this.latitude+","+this.longitude).then((function(e){200===e.status&&e.json().then((function(e){n.elevation=parseInt(e.data,10),isNaN(n.elevation)?(n.elevation=-1,t(null)):t(n.elevation)}))})).catch((function(e){n.elevation=-1,t(null)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJson",value:function(){return{latitude:this.latitude,longitude:this.longitude,elevation:this.elevation}}},{key:"toWaypointJson",value:function(){return{name:this.name,description:this.description,latitude:this.latitude,longitude:this.longitude,elevation:this.elevation}}}]),e}(),J=function e(t){Object(R.a)(this,e),this.repository=t instanceof String?t:"https://"+t.webId.split("/")[2],this.defaultFolder="/viade/",this.routesDirectory="routes/",this.resourcesDirectory="resources/",this.commentsDirectory="comments/",this.sharedDirectory="shared/",this.inboxDirectory="inbox/",this.groupsDirectory="groups/"},W=n(116),_=n(31),z=new(n(543))(_),Z=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).sharedRoutesToAdd=[],n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"storeRoute",value:function(){var e=Object(S.a)(O.a.mark((function e(t,n){var a,r,i=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.length>2&&void 0!==i[2]?i[2]:function(){},r=this.repository+this.defaultFolder+this.routesDirectory+t,this.storeFile(r,n,a);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRoutes",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:function(e,t){},e.abrupt("return",this.getFolder(this.repository+this.defaultFolder+this.routesDirectory).then((function(e){for(var a=0;a<e.files.length;a++)n.getFile(e.files[a].url).then((function(e){t(e,null)}),(function(e){t(null,e)}));return e.files.length}),(function(e){return n.createBasicFolders(),0})).then((function(e){return e})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeGroup",value:function(){var e=Object(S.a)(O.a.mark((function e(t,n){var a,r,i=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.length>2&&void 0!==i[2]?i[2]:function(){},r=this.repository+this.defaultFolder+this.groupsDirectory+t,this.storeFile(r,n,a);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getGroups",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:function(e,t){},e.abrupt("return",this.getFolder(this.repository+this.defaultFolder+this.groupsDirectory).then((function(e){for(var a=0;a<e.files.length;a++)n.getFile(e.files[a].url).then((function(e){t(e,null)}),(function(e){t(null,e)}));return e.files.length}),(function(e){return n.createBasicFolders(),0})).then((function(e){return e})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeResource",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=this.getExpectedPathForResource(e);this.storeFile(a,t,n)}},{key:"getExpectedPathForResource",value:function(e){return this.repository+this.defaultFolder+this.resourcesDirectory+e}},{key:"getResources",value:function(){var e=Object(S.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(null,null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRoutesSharedToMe",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:function(e,t){},this.getFolder(this.repository+this.defaultFolder+this.sharedDirectory).then(function(){var e=Object(S.a)(O.a.mark((function e(a){var r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=O.a.mark((function e(r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFile(a.files[r].url).then(function(){var e=Object(S.a)(O.a.mark((function e(i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(O.a.mark((function e(){var o,s,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=JSON.parse(i).routes,s=O.a.mark((function e(i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFile(o[i]["@id"]).then((function(e){var n=r===a.files.length-1&&i===o.length-1;t(e,null,n)}),(function(e){t()}));case 2:case"end":return e.stop()}}),e)})),u=0;case 3:if(!(u<o.length)){e.next=8;break}return e.delegateYield(s(u),"t0",5);case 5:u++,e.next=3;break;case 8:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=6;break;case 4:e.prev=4,e.t1=e.catch(0);case 6:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){t(null,e)}));case 2:case"end":return e.stop()}}),e)})),i=0;case 2:if(!(i<a.files.length)){e.next=7;break}return e.delegateYield(r(i),"t0",4);case 4:i++,e.next=2;break;case 7:return e.abrupt("return",0===a.files.length);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return n.createBasicFolders(),!1}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkInbox",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:function(){},e.next=3,this.getFolder(this.repository+"/inbox/").then(function(){var e=Object(S.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.files.map((function(e){return e.url})).forEach(function(){var e=Object(S.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFile(n).then(function(e){(new W.Parser).parse(e,function(e,a,r){a&&"http://schema.org/text"===a.predicate.id&&a.object.id.includes("/viade/routes/")&&(t(a.object.id),this.addRoutesAsShared([a.object.id.split('"').join("")]),this._eliminateFile(n))}.bind(this))}.bind(this),(function(e){}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this),(function(e){}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_eliminateFile",value:function(e){z.delete(e)}},{key:"_eliminateSharedFolder",value:function(){var e=this.repository+this.defaultFolder+this.sharedDirectory;this.getFolder(e).then(function(e){for(var t=0;t<e.files.length;t++)this._eliminateFile(e.files[t].url)}.bind(this))}},{key:"deleteAll",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:function(){},z.deleteFolderRecursively(this.repository+this.defaultFolder).then((function(e){t("OK")}),(function(e){t(null)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeFile",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=z.createFile(e,t);a.then((function(e){n(e.url,e)}),(function(e){n(null,e)}))}},{key:"addRoutesAsShared",value:function(){var e=Object(S.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,a="en3a.json",e.prev=2,e.next=5,this.getFile(this.repository+this.defaultFolder+this.sharedDirectory+a);case 5:n=e.sent,n=JSON.parse(n),e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(2),404===e.t0.status){e.next=15;break}throw e.t0;case 15:n={"@context":{"@version":1.1,routes:{"@container":"@list","@id":"viade:routes"},viade:"http://arquisoft.github.io/viadeSpec/"},routes:[]};case 16:r=n.routes.map((function(e){return e["@id"]})),t.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),t=[],n.routes=r.map((function(e){return{"@id":e.toString()}})),this.storeFile(this.repository+this.defaultFolder+this.sharedDirectory+a,JSON.stringify(n));case 21:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getFolder",value:function(){var e=Object(S.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.readFolder(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFile",value:function(){var e=Object(S.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.readFile(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createBasicFolders",value:function(){var e=Object(S.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.createFolder(this.repository+this.defaultFolder);case 2:z.createFolder(this.repository+this.defaultFolder+this.routesDirectory),z.createFolder(this.repository+this.defaultFolder+this.resourcesDirectory),z.createFolder(this.repository+this.defaultFolder+this.commentsDirectory),z.createFolder(this.repository+this.defaultFolder+this.sharedDirectory);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(J),Y=n(31),X=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(R.a)(this,e),this.fileData=n,this.podURL=null,this.podExpectedPath=null,this.route=t,this.isInPod=!1,this.isInLocal=!1,this.name=null,n&&(this.isInLocal=!0,n.name&&(this.name=n.name)),this.calculateExpectedPodUrl()}return Object(C.a)(e,[{key:"getUploadFileName",value:function(){return this.route.getId()+"_"+this.name}},{key:"getPodUrl",value:function(){return this.podURL||this.podExpectedPath}},{key:"calculateExpectedPodUrl",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.name){e.next=7;break}return e.t0=Z,e.next=4,Y.currentSession();case 4:e.t1=e.sent,t=new e.t0(e.t1),this.podExpectedPath=t.getExpectedPathForResource(this.getUploadFileName());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFromPod",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.podURL){e.next=7;break}return e.t0=Z,e.next=4,Y.currentSession();case 4:e.t1=e.sent,new e.t0(e.t1).getFile(this.podURL).then((function(e){t.fileData=e,t.isInLocal=!0}),(function(e){}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadToPod",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.fileData){e.next=10;break}return this.name=this.fileData.name,this.calculateExpectedPodUrl(),e.t0=Z,e.next=6,Y.currentSession();case 6:return e.t1=e.sent,t=new e.t0(e.t1),e.next=10,t.storeResource(this.getUploadFileName(),this.fileData,function(e,t){e&&(this.isInPod=!0,this.podURL=e)}.bind(this));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Q=n(31);function q(e){var t=[];return e.forEach((function(e){var n=new U(e.lat,e.lng,e.elv,e.name,e.description);n.askForElevation((function(){})),t.push(n)})),t}function K(e){for(var t=0,n=1;n<e.length;n++){var a=Object(D.latLng)(e[n].lat,e[n].lng),r=Object(D.latLng)(e[n-1].lat,e[n-1].lng);t+=a.distanceTo(r)}return t}var $=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Object(R.a)(this,e),this.id=Object(V.a)().toString(),this.name=t,this.author=n,this.description=a,this.points=q(r),this.media=[],this.routeLength=K(r)}return Object(C.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getAuthor",value:function(){return this.author}},{key:"getDescription",value:function(){return this.description}},{key:"getPoints",value:function(){return this.points}},{key:"getFileName",value:function(){return this.id+".json"}},{key:"getRouteLength",value:function(){return(this.routeLength/1e3).toFixed(2)+" km"}},{key:"addMedia",value:function(e){this.media.push(new X(this,e))}},{key:"addSimplePoints",value:function(e){var t=this;e.forEach((function(e){if(void 0===t.points.find((function(t){return t.getLatitude()===e.lat||t.getLongitude()===e.lng}))){var n=new U(e.lat,e.lng,e.elv);n.askForElevation(),t.points.push(n)}}))}},{key:"uploadToPod",value:function(){var e=Object(S.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.currentSession();case 2:return n=e.sent,a=new Z(n),e.next=6,this.uploadMedia();case 6:return e.next=8,a.storeRoute(this.getFileName(),this.toJsonLd(),t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadMedia",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.media.length)){e.next=7;break}return e.next=4,this.media[t].uploadToPod();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePoints",value:function(e,t){var n=this,a=[];e.forEach((function(e){var r=n.points.find((function(t){return t.getLatitude()===e.lat&&t.getLongitude()===e.lng}));if(void 0===r){var i=new U(e.lat,e.lng);i.askForElevation((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;null!==e&&t(n)})),a.push(i)}else a.push(r),t(a)})),this.points=a,t(this.points)}},{key:"getComparableString",value:function(){try{var e=JSON.parse(this.toJsonLd());return e["@context"]="",e.id="",JSON.stringify(e)}catch(t){return JSON.stringify({})}}},{key:"modifyFromJsonLd",value:function(e){try{void 0===(e=JSON.parse(e)).id?this.id=Object(V.a)().toString():this.id=e.id,this.name=e.name,this.author=e.author,this.description=e.description;var t=e.waypoints;void 0!==t&&(t=t.map((function(e){return{lat:e.latitude,lng:e.longitude,elv:e.elevation,name:e.name,description:e.description}})),this.points=q(t));var n=e.points;return void 0!==n&&(n=n.map((function(e){return{lat:e.latitude,lng:e.longitude,elv:e.elevation}})),this.addSimplePoints(n)),0===this.points.length?!1:(this.media=[],e.media.map((function(e){return e["@id"]})).forEach(function(e){var t=new X(this);t.isInPod=!0,t.podURL=e,this.media.push(t)}.bind(this)),this.routeLength=K(n),!0)}catch(a){return!1}}},{key:"toJsonLd",value:function(){var e=[],t=[],n=[];return this.points.forEach((function(t){return e.push(t.toJson())})),this.points.forEach((function(e){return t.push(e.toWaypointJson())})),this.media.map((function(e){return e.getPodUrl()})).forEach((function(e){n.push({"@id":e})})),JSON.stringify({"@context":{"@version":1.1,comments:{"@id":"viade:comments","@type":"@id"},description:{"@id":"schema:description","@type":"xsd:string"},media:{"@container":"@list","@id":"viade:media"},name:{"@id":"schema:name","@type":"xsd:string"},points:{"@container":"@list","@id":"viade:points"},latitude:{"@id":"schema:latitude","@type":"xsd:double"},longitude:{"@id":"schema:longitude","@type":"xsd:double"},elevation:{"@id":"schema:elevation","@type":"xsd:double"},author:{"@id":"schema:author","@type":"@id"},rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",viade:"http://arquisoft.github.io/viadeSpec/",xsd:"http://www.w3.org/2001/XMLSchema#"},id:this.id,name:this.name,author:this.author,description:this.description,comments:"",media:n,waypoints:t,points:e})}}]),e}(),ee=n(31),te=n(51).default,ne=function(){function e(){Object(R.a)(this,e)}return Object(C.a)(e,null,[{key:"getName",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.currentSession();case 2:return t=e.sent,n=te[t.webId].vcard_fn,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsername",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.currentSession();case 2:return t=e.sent,e.abrupt("return",t.webId.split("/")[2].split(".")[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSolidProfile",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.currentSession();case 2:return t=e.sent,e.abrupt("return",t.webId);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getLocality",value:function(){var e=Object(S.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){te.user["http://www.w3.org/2006/vcard/ns#hasAddress"].value.then((function(n){te[n].vcard_locality.value.then((function(t){e(t)})).catch((function(e){return t(e)}))})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getRegion",value:function(){var e=Object(S.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){te.user["http://www.w3.org/2006/vcard/ns#hasAddress"].value.then((function(n){te[n].vcard_region.value.then((function(t){e(t)})).catch((function(e){return t(e)}))})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getEmail",value:function(){var e=Object(S.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){te.user["http://www.w3.org/2006/vcard/ns#hasEmail"].value.then((function(n){te[n].vcard_value.value.then((function(t){e(t.substring("mailto:".length))})).catch((function(e){return t(e)}))})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPhone",value:function(){var e=Object(S.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){te.user["http://www.w3.org/2006/vcard/ns#hasTelephone"].value.then((function(n){te[n].vcard_value.value.then((function(t){e(t.substring("tel:".length))})).catch((function(e){return t(e)}))})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getImage",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.currentSession();case 2:return t=e.sent,n=te[t.webId].vcard_hasPhoto,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ae=n(54),re=n(217),ie=n(90),oe=(n(909),n(133),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).handleEnter=function(e){13===e.charCode&&(e.preventDefault(),n.lookFor(n.search.current.value))},n.map=e.map,n.search=r.a.createRef(),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"lookFor",value:function(e){var t=this;F.b.dismiss(),0===this.search.current.value.length?F.b.error(l.t("alertNoInputOnSearch")):(F.b.info(l.t("searching")),fetch("https://nominatim.openstreetmap.org/search?q="+e+"&addressdetails=1&limit=3&format=json").then((function(e){200===e.status?e.json().then((function(e){if(e.length>0){var n=e[0];t.map.current.setState({editablePosition:[n.lat,n.lon]}),t.map.current.setState({boundingbox:n.boundingBox}),t.search.current.value=n.display_name,F.b.dismiss(),F.b.success(l.t("mapCreationSearchBarFound")+n.display_name)}else t.search.current.value="",F.b.dismiss(),F.b.error(l.t("mapCreationSearchBarError"))})):(t.search.current.value="",F.b.dismiss(),F.b.error(l.t("mapCreationSearchBarError")))})))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ae.a,{style:{margin:"1%"}},r.a.createElement(ae.a.Group,{as:re.a},r.a.createElement(ie.a,{sm:2},r.a.createElement(ae.a.Label,null,l.t("searchBarLabel"))),r.a.createElement(ie.a,null,r.a.createElement(ae.a.Control,{id:"txtSearch",onKeyPress:this.handleEnter,ref:this.search})),r.a.createElement(ie.a,{sm:.5},r.a.createElement(E.a,{id:"btnSearch",variant:"primary",onClick:function(){return e.lookFor(e.search.current.value)}},r.a.createElement("i",{className:"fa fa-search"}))))))}}]),t}(r.a.Component));function se(e){var t=Object(u.c)().t;return r.a.createElement("div",{id:"routeCreationFormDiv",style:{padding:"0% 10% 0% 5%"}},r.a.createElement(ae.a,null,r.a.createElement(ae.a.Group,{as:re.a},r.a.createElement(ie.a,{sm:2},r.a.createElement(ae.a.Label,null,t("routeName"))),r.a.createElement(ie.a,null,r.a.createElement(ae.a.Control,{placeholder:t("routeNamePlaceholder"),ref:e.routeNameRef,role:"name",id:"routeNameInput"}))),r.a.createElement(ae.a.Group,{as:re.a},r.a.createElement(ie.a,{sm:2},r.a.createElement(ae.a.Label,null,t("routeDescription"))),r.a.createElement(ie.a,null,r.a.createElement(ae.a.Control,{as:"textarea",placeholder:t("routeDescriptionPlaceholder"),ref:e.routeDescriptionRef,role:"description",rows:3}))),r.a.createElement(ae.a.Group,{as:re.a},r.a.createElement(ie.a,{sm:2},r.a.createElement(ae.a.Label,null,t("fileUpload"))),r.a.createElement(ie.a,null,r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("label",{className:"custom-file-label",htmlFor:"routeFileUpload"},t("fileUploadLabel")),r.a.createElement("input",{id:"routeFileUpload",type:"file",multiple:!0,accept:"image/*",className:"custom-file-input"})))))))}var ue=n(488),ce=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).state={points:e.route.getPoints()},n.init(n.state.points),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"init",value:function(e){var t=1;this.data={labels:e.map((function(e){return"P".concat(t++)})),datasets:[{label:"Elevation",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:e.map((function(e){return e.getElevation()}))}]},this.lineOptions={scales:{xAxes:[{gridLines:{display:!0}}],yAxes:[{gridLines:{display:!0},ticks:{beginAtZero:!0}}]},legend:{display:!1},tooltips:{enabled:!0}}}},{key:"update",value:function(e){this.init(e),this.setState({points:this.state.points})}},{key:"render",value:function(){return r.a.createElement("div",{style:this.props.style},r.a.createElement(ue.a,{data:this.data,options:this.lineOptions}))}}]),t}(r.a.Component),le=(n(1023),n(487)),de=n(490),pe=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).remove=function(){n.map.current.remove(n.state.point)},n.save=function(){var e=n.nameForm.current.value,t=n.descriptionForm.current.value;n.map.current.updatePointNameDescription(n.state.point,e,t),n.disable()},n.disable=function(){n.setState({disabled:!0})},n.enable=function(){n.setState({disabled:!1})},n.map=e.map,n.state={point:void 0,disabled:!0},n.nameForm=r.a.createRef(),n.descriptionForm=r.a.createRef(),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"setPoint",value:function(e){this.setState({point:e}),void 0!==e&&(this.nameForm.current.value=void 0===e.name?"":e.name,this.descriptionForm.current.value=void 0===e.description?"":e.description)}},{key:"isEditing",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("p",{style:{margin:"1.5vh"}},this.state.point.lat.toFixed(3))),r.a.createElement("td",null,r.a.createElement("p",{style:{margin:"1.5vh"}},this.state.point.lng.toFixed(3))),r.a.createElement("td",null,r.a.createElement(le.a,{style:{margin:"1.5vh 0%"},ref:this.nameForm,onChange:this.enable})),r.a.createElement("td",null,r.a.createElement(le.a,{style:{margin:"1.5vh 0%"},ref:this.descriptionForm,onChange:this.enable})),r.a.createElement("td",null,r.a.createElement(E.a,{style:{margin:"1.5vh"},onClick:this.save,disabled:this.state.disabled},r.a.createElement("i",{className:"fa fa-floppy-o","aria-hidden":"true"})),r.a.createElement(E.a,{style:{backgroundColor:"red",borderColor:"white",margin:"1.5vh"},onClick:this.remove},r.a.createElement("i",{className:"fa fa-trash-o fa-fw"}))))}},{key:"printPoint",value:function(){return void 0===this.state.point?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5},l.t("editMessage"))):this.isEditing()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(de.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,l.t("latitude")),r.a.createElement("th",null,l.t("longitude")),r.a.createElement("th",null,l.t("name")),r.a.createElement("th",null,l.t("description")),r.a.createElement("th",null,l.t("actions")))),r.a.createElement("tbody",null,this.printPoint())))}}]),t}(r.a.Component),he=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).routeName=r.a.createRef(),n.routeDescription=r.a.createRef(),n.map=r.a.createRef(),n.elevationChart=r.a.createRef(),n.pointInfo=r.a.createRef(),n.routeManager=e.routeManager,n.tempRoute=void 0,n.newRoute=new $("","","",[]),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"toggleSpinner",value:function(){var e=document.getElementById("spinner");e.hidden=!e.hidden}},{key:"createRoute",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n,a,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.toggleSpinner(),document.getElementById("btnSave").disabled=!0,F.b.dismiss(),t=!0,""===(n=this.routeName.current.value)&&(t=!1,F.b.error(l.t("alertName"))),(a=this.map.current.state.points).length<2&&(t=!1,F.b.error(l.t("alertPoints"))),t){e.next=12;break}return this.toggleSpinner(),document.getElementById("btnSave").disabled=!1,e.abrupt("return",void 0);case 12:return r=this.routeDescription.current.value,e.t0=$,e.t1=n,e.next=17,ne.getUsername();case 17:return e.t2=e.sent,e.t3=r,e.t4=a,i=new e.t0(e.t1,e.t2,e.t3,e.t4),e.abrupt("return",i);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkRouteChanged",value:function(e){return void 0===this.tempRoute||this.tempRoute.getComparableString()!==e.getComparableString()?(this.tempRoute=e,this.routeManager.addRoute(this.tempRoute),e):this.tempRoute}},{key:"uploadToPod",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createRoute();case 2:if(void 0!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return t=this.checkRouteChanged(t),document.getElementById("routeFileUpload").files.forEach((function(e){t.addMedia(e)})),e.next=9,t.uploadToPod((function(e,t){null===e?F.b.error(l.t("alertAccessPOD")):(n.toggleSpinner(),window.location.href="#routes/list")}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"routeCreationContainer"},r.a.createElement(F.a,{id:"toastContainer",position:F.b.POSITION.TOP_CENTER,autoClose:5e3}),r.a.createElement("h1",{style:{padding:"1%"},id:"title"},l.t("mapCreationTitle")),r.a.createElement(se,{routeNameRef:this.routeName,routeDescriptionRef:this.routeDescription}),r.a.createElement("div",{id:"mapPointsContainer",style:{padding:"1% 0%"}},r.a.createElement("div",{id:"mapAndSearch"},r.a.createElement(oe,{map:this.map}),r.a.createElement(G,{ref:this.map,pointInfo:this.pointInfo,onChange:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.elevationChart;e.newRoute.updatePoints(t,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;t.current.update(e)}))}})),r.a.createElement("div",{id:"pointManager"},r.a.createElement("h2",{style:{padding:"3% 1% 2% 1%"}},l.t("routeCreationElevationPreviewTitle")),r.a.createElement(ce,{style:{padding:"3% 1% 2% 1%"},ref:this.elevationChart,route:this.newRoute}))),r.a.createElement("div",{style:{margin:"1.5vh"}},r.a.createElement(pe,{map:this.map,ref:this.pointInfo})),r.a.createElement("div",null,r.a.createElement(u.a,null,(function(t){return r.a.createElement(E.a,{id:"btnSave",variant:"primary",onClick:function(){e.uploadToPod()},style:{margin:"1.5vh"}},t("mapCreationSaveButton"))})),r.a.createElement(N.a,{id:"spinner",hidden:!0,animation:"border"})))}}]),t}(a.Component),me=n(1042),fe=n(1048),ve=n(1041),ge=(n(1024),function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(j.a)(this,Object(I.a)(t).call(this))).setPositionScaled=function(e){a.map.current.leafletElement.fitBounds(e.target.getBounds().pad(.25))},a.map=r.a.createRef(),a.route=e.route,a.movable=e.movable,a.normalIcon=M.a.icon({iconUrl:n(277),iconSize:[64,64],iconAnchor:[32,54],popupAnchor:[32,0],shadowUrl:null,shadowSize:null,shadowAnchor:null}),a.editedIcon=M.a.icon({iconUrl:n(278),iconSize:[64,64],iconAnchor:[32,54],popupAnchor:[0,-40],shadowUrl:null,shadowSize:null,shadowAnchor:null}),a}return Object(P.a)(t,e),Object(C.a)(t,[{key:"getPopup",value:function(e){return""!==e.name?""!==e.description?r.a.createElement(fe.a,null,r.a.createElement("b",null,e.name),r.a.createElement("br",null),e.description):r.a.createElement(fe.a,null,r.a.createElement("b",null,e.name)):""!==e.description?r.a.createElement(fe.a,null,e.description):void 0}},{key:"getIcon",value:function(e){return""!==e.name||""!==e.description?this.editedIcon:this.normalIcon}},{key:"getMarkers",value:function(e){var t=this;return this.movable?this.route.getPoints().map((function(e,n){return r.a.createElement(B.a,{marker_index:n,position:[e.getLatitude(),e.getLongitude()],icon:t.getIcon(e)},t.getPopup(e),";")})):r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{position:e[0],icon:this.normalIcon}),r.a.createElement(B.a,{position:e[e.length-1],icon:this.normalIcon}))}},{key:"render",value:function(){var e=[];return this.route.getPoints().forEach((function(t){e.push([t.getLatitude(),t.getLongitude()])})),r.a.createElement(T.a,{ref:this.map,center:[0,0],zoom:this.props.zoom,dragging:this.movable,scrollWheelZoom:this.movable,touchZoom:this.movable,zoomControl:this.movable,doubleClickZoom:this.movable,style:this.props.style},r.a.createElement(A.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(ve.a,{onAdd:this.setPositionScaled},this.getMarkers(e),r.a.createElement(L.a,{positions:e,color:"red"})))}}]),t}(r.a.Component)),be=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).route=e.route,n.state={mapComponent:r.a.createElement(ge,{route:n.route,movable:!1,zoom:12,style:{borderRadius:"5px",margin:"0",height:"100%",width:"100%"}})},n.showShareButton=!0,void 0!==e.showShareButton&&(n.showShareButton=e.showShareButton),n.showInfoButton=!0,void 0!==e.showInfoButton&&(n.showInfoButton=e.showInfoButton),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=[this.showInfoButton&&r.a.createElement(E.a,{variant:"dark",href:"#routes/info/".concat(this.route.id)},l.t("info")),this.showShareButton&&r.a.createElement(E.a,{variant:"dark",style:{margin:"16px"},href:"#routes/share/".concat(this.route.id)},l.t("share"))];return r.a.createElement(y.a,{text:"dark"},r.a.createElement(y.a.Header,{style:{minHeight:"100px",height:"300px",padding:"0"}},r.a.createElement("div",{id:"routeMapDiv-"+this.route.id,style:{width:"100%",height:"100%",padding:"0"}},this.state.mapComponent)),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,{style:{fontSize:"24px"}},this.route.name),r.a.createElement(y.a.Text,{style:{fontSize:"18px"}},this.route.description),e))}},{key:"update",value:function(){this.setState({mapComponent:this.state.mapComponent})}},{key:"toggleShareButton",value:function(){this.showShareButton=!this.showShareButton}}]),t}(r.a.Component),ye=n(53),Ee=n.n(ye),we=new(function(){function e(){Object(R.a)(this,e),this.resetRoutes()}return Object(C.a)(e,[{key:"getRoutes",value:function(){return this.routes}},{key:"getRouteById",value:function(e){return this.routes.find((function(t){return t.getId()===e}))}},{key:"addRoute",value:function(e){this.routes.push(e)}},{key:"addSharedRoute",value:function(e){this.routesSharedToMe.push(e)}},{key:"getSharedRouteById",value:function(e){return this.routesSharedToMe.find((function(t){return t.getId()===e}))}},{key:"resetRoutes",value:function(){this.routes=[],this.routesSharedToMe=[]}},{key:"getAnyRouteById",value:function(e){return this.getRouteById(e)||this.getSharedRouteById(e)}}]),e}()),ke=n(31),xe=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).routeManager=we,n.cardDeckSize=4,n.state={routes:[],sharedRoutes:[],spinnerHidden:!1},void 0!==e.sync&&!0!==e.sync||(n.syncRoutesWithPod().then((function(){n.state.spinnerHidden=!0})),n.processedRoutes=0,n.retrievedRoutes=0),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){for(var e=this,t=[],n=0;n<=this.state.routes.length;)t.push(r.a.createElement(me.a,{style:{padding:"1% 0% 1% 2%",width:"100%"}},this.state.routes.slice(n,n+this.cardDeckSize).map((function(e){return r.a.createElement(be,{route:e})})))),n+=this.cardDeckSize;return r.a.createElement("div",null,r.a.createElement(F.a,{position:F.b.POSITION.TOP_CENTER,autoClose:5e3}),r.a.createElement(u.a,null,(function(e){return r.a.createElement("h1",{style:{padding:"1%"}},e("routeListText"))})),r.a.createElement(u.a,null,(function(t){return r.a.createElement("h2",{style:{padding:"1%"},hidden:e.state.spinnerHidden},t("routeListLoadingMessage"))})),r.a.createElement(N.a,{id:"spinner",hidden:this.state.spinnerHidden,animation:"border"}),t,r.a.createElement("div",{id:"messageArea"},this.state.message))}},{key:"syncRoutesWithPod",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.routeManager.resetRoutes(),e.next=3,ke.currentSession();case 3:null!==(t=e.sent)&&void 0!==t&&new Z(t).getRoutes((function(e,t){if(null===e)return F.b.error(l.t("alertAccessPOD")),0;if(0!==e.length){var a=new $("","","",[]);if(a.modifyFromJsonLd(e)){n.routeManager.addRoute(a);var r=n.state.routes;r.push(a),n.processedRoutes+=1,n.processedRoutes===n.retrievedRoutes&&(n.setState({routes:r}),Ee()("#messageArea").empty())}else F.b.error(l.t("invalidRoute")),n.retrievedRoutes--,n.processedRoutes===n.retrievedRoutes&&(n.setState({routes:n.state.routes}),Ee()("#messageArea").empty())}return n.processedRoutes})).then((function(e){0===e?n.setState({message:r.a.createElement("div",null,r.a.createElement("h3",null,l.t("routeListOoopsTitle")),r.a.createElement("p",null,l.t("routeListOoopsParagraph")))}):n.retrievedRoutes=e}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.Component),Oe=n(491),Se=n.n(Oe),Re=n(492),Ce=n.n(Re),je=n(493),Ie=n.n(je),Pe=n(494),Ne=n.n(Pe),Fe=n(495),Te=n.n(Fe),Ae=(n(1025),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).orderOfElements=[["routeHelpIntro",n.getIntroduction],["routeHelpCreatePOD",n.getCreateAPod],["routeHelpLogin",n.getLogin],["routeHelpCreateRoutes",n.getCreateARoute],["routeHelpViewRoutes",n.getViewARoute],["routeHelpShareRoutes",n.getShareWithFiends]],n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){for(var e=[this.getIndex()],t=0;t<this.orderOfElements.length;t++){var n=this.orderOfElements[t];e.push(n[1]())}return r.a.createElement("div",null,e)}},{key:"getIndex",value:function(){for(var e=this,t=[],n=function(n){var a=e.orderOfElements[n];t.push(r.a.createElement(u.a,null,(function(e){return r.a.createElement("h3",null,n+1+".- "+e(a[0]))})))},a=0;a<this.orderOfElements.length;a++)n(a);return r.a.createElement("div",{class:"index"},r.a.createElement(u.a,{role:"title"},(function(e){return r.a.createElement("h2",null,e("routeHelpIndex"))})),t)}},{key:"getIntroduction",value:function(){return r.a.createElement("div",{class:"helpElement"},r.a.createElement(u.a,{role:"title"},(function(e){return r.a.createElement("h2",null,e("routeHelpIntro"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("p",null,e("routeHelpIntro_1"))})),r.a.createElement("img",{alt:"Viade main view",src:Se.a,width:"65%"}),r.a.createElement(u.a,null,(function(e){return r.a.createElement("p",null,e("routeHelpIntro_2"))})),r.a.createElement("img",{alt:"Viade sample routes",src:Ce.a,width:"65%"}))}},{key:"getCreateAPod",value:function(){return r.a.createElement("div",{class:"helpElement"},r.a.createElement(u.a,{role:"title"},(function(e){return r.a.createElement("h2",null,e("routeHelpCreatePOD"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("p",null,e("routeHelpCreatePOD_1"))})))}},{key:"getLogin",value:function(){return r.a.createElement("div",{class:"helpElement"},r.a.createElement(u.a,{role:"title"},(function(e){return r.a.createElement("h2",null,e("routeHelpLogin"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("p",null,e("routeHelpLogin_1"))})))}},{key:"getCreateARoute",value:function(){return r.a.createElement("div",{class:"helpElement"},r.a.createElement(u.a,{role:"title"},(function(e){return r.a.createElement("h2",null,e("routeHelpCreateRoutes"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("p",null,e("routeHelpCreateRoutes_1"))})),r.a.createElement("img",{alt:"Create your route",src:Ie.a,width:"65%"}))}},{key:"getViewARoute",value:function(){return r.a.createElement("div",{class:"helpElement"},r.a.createElement(u.a,{role:"title"},(function(e){return r.a.createElement("h2",null,e("routeHelpViewRoutes"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("p",null,e("routeHelpViewRoutes_1"))})),r.a.createElement("img",{alt:"Details of the route",src:Ne.a,width:"65%"}))}},{key:"getShareWithFiends",value:function(){return r.a.createElement("div",{class:"helpElement"},r.a.createElement(u.a,{role:"title"},(function(e){return r.a.createElement("h2",null,e("routeHelpShareRoutes"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("p",null,e("routeHelpShareRoutes_1"))})),r.a.createElement("img",{alt:"Share route",src:Te.a,width:"65%"}))}}]),t}(r.a.Component)),Le=n(496),Be=n.n(Le),De=function(e){function t(){return Object(R.a)(this,t),Object(j.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(P.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App-header",onLoad:function(){return e.printName()}},r.a.createElement(u.a,null,(function(t){return e.username?r.a.createElement("h1",{id:"name"},t("homeWelcome")+" "+e.username+","):r.a.createElement("h1",{id:"name"},t("homeWelcome"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("h2",null,e("homeWelcome2"))})),r.a.createElement("img",{src:Be.a,width:"255",height:"300",className:"d-inline-block align-top",alt:"Viade logo"}),r.a.createElement("h3",null,"V 1.1"))}},{key:"printName",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("name"),this.username){e.next=5;break}return e.next=4,ne.getName();case 4:this.username=e.sent;case 5:t.appendChild(document.createTextNode(this.username+","));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component),Me=n(497),He=n.n(Me);var Ge=function(e){var t=Object(u.c)().t;return r.a.createElement(y.a,{className:"text-center",border:"dark",text:"dark",style:{width:"20vw",height:"auto",margin:"1%"}},r.a.createElement(y.a.Header,{style:{alignItems:"center",padding:"0"}},r.a.createElement("img",{src:e.profileImage,width:"200",height:"200",className:"d-inline-block align-top",alt:"Profile img"})),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,e.profileName),r.a.createElement(y.a.Subtitle,null,e.profileAddress),r.a.createElement(y.a.Text,null,e.profileEmail),r.a.createElement("style",{type:"text/css"},"\n                    .btn-solid {\n                    background-color: #7C4DFF;\n                    color: white;\n                    }\n                    "),r.a.createElement(E.a,{variant:"solid",href:e.profileLink},t("friendCardProfile"))))},Ve=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this))).routeManager=e.routeManager,n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App-FlexCenterColumn",onLoad:function(){return e.loadInfo()}},r.a.createElement(u.a,null,(function(e){return r.a.createElement("h1",{style:{padding:"1%"}},e("profileTitle"))})),r.a.createElement(Ge,{profileLink:"No info available",profileImage:"Not loaded"}),r.a.createElement("img",{src:He.a,width:"150",height:"150",className:"align-top",alt:"Viade logo"}))}},{key:"loadInfo",value:function(){var e=Object(S.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadName(),this.loadAddress(),this.loadEmail(),this.loadSolidProfile(),this.loadImage();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadName",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getName();case 2:null!==(t=e.sent)&&Ee()(".card-title.h5").text(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAddress",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ee()(".card-subtitle.h6"),e.next=3,ne.getLocality();case 3:return n=e.sent,e.next=6,ne.getRegion();case 6:a=e.sent,void 0!==n?(t.text(n),void 0!==a&&t.text(n+", "+a)):void 0!==a&&t.text(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEmail",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getEmail();case 2:void 0!==(t=e.sent)&&Ee()(".card-text").text(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSolidProfile",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getSolidProfile();case 2:null!==(t=e.sent)&&Ee()(".btn.btn-solid").attr("href",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadImage",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getImage();case 2:null!==(t=e.sent)&&Ee()(".d-inline-block.align-top").attr("src",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component);var Ue=function(e){var t=Object(u.c)().t;return r.a.createElement(y.a,{text:"dark",border:"primary",style:{width:"20vw",height:"auto",margin:"1%"}},r.a.createElement(y.a.Header,{style:{alignItems:"center",padding:"0"}},r.a.createElement("img",{src:e.friendImage,width:"170",height:"170",className:"d-inline-block align-top",alt:"Friend profile"})),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,{style:{fontSize:"24px"}},e.friendName),r.a.createElement("style",{type:"text/css"},"\n                    .btn-solid {\n                    background-color: #7C4DFF;\n                    color: white;\n                    }\n                    "),r.a.createElement(E.a,{variant:"solid",href:e.friendLink},t("friendCardProfile"))))},Je=n(31),We=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(R.a)(this,e),this.id=Object(V.a)().toString(),this.name=t,this.users=n}return Object(C.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getUsers",value:function(){return this.users}},{key:"getFileName",value:function(){return this.id+".json"}},{key:"uploadToPod",value:function(){var e=Object(S.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.currentSession();case 2:return n=e.sent,a=new Z(n),e.next=6,a.storeGroup(this.getFileName(),this.toJsonLd(),t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComparableString",value:function(){var e=JSON.parse(this.toJsonLd());return e["@context"]="",e.id="",JSON.stringify(e)}},{key:"modifyFromJsonLd",value:function(e){void 0===e.id?this.id=Object(V.a)().toString():this.id=e.id,this.name=e.name,this.users=e.users}},{key:"toJsonLd",value:function(){return JSON.stringify({"@context":{"@version":1.1,name:{"@id":"schema:name","@type":"xs:string"},users:{"@container":"@list","@id":"schema:Person"},schema:"http://schema.org/",xsd:"http://www.w3.org/2001/XMLSchema#"},id:this.id,name:this.name,users:this.users})}}]),e}(),_e=n(31),ze={flexWrap:"wrap",justifyContent:"space-between",padding:"2%"},Ze=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).groupManager=e.groupManager,n.state={groups:[],spinnerHidden:!1},n.syncGroupsWithPod().then((function(){n.state.spinnerHidden=!0})),n.processedGroups=0,n.retrievedGroups=0,n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"syncGroupsWithPod",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.groupManager.resetGroups(),e.next=3,_e.currentSession();case 3:null!==(t=e.sent)&&void 0!==t&&new Z(t).getGroups((function(e,t){if(null===e)F.b.error(l.t("alertAccessPOD"));else if(0!==e.length)try{var a=new We("",[]);a.modifyFromJsonLd(JSON.parse(e)),n.groupManager.addGroup(a);var r=n.state.groups;r.push(a),n.processedGroups+=1,n.processedGroups===n.retrievedGroups&&(n.setState({groups:r}),Ee()("#messageArea").empty())}catch(t){}})).then((function(e){0===e?n.setState({message:r.a.createElement("div",null,r.a.createElement("h3",null,l.t("messageNoGroups")),r.a.createElement("p",null,l.t("messageNoGroupsCreateOne")))}):n.retrievedGroups=e}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App-FlexCenterColumn"},r.a.createElement(u.a,null,(function(e){return r.a.createElement("h1",{style:{padding:"1%"}},e("groupsTitle"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement(E.a,{id:"btnCreateGroup",variant:"primary",size:"lg",href:"#createGroup",style:{margin:"2vh"}},e("groupsCreate"))})),r.a.createElement("div",{style:ze},this.state.groups.map((function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,e.name),r.a.createElement("div",null,e.users.map((function(e){return r.a.createElement("div",{style:ze},r.a.createElement(Ue,{friendImage:e.image,friendName:e.name,friendLink:e.webId}))}))))}))),r.a.createElement("div",{id:"messageArea"},this.state.message))}}]),t}(r.a.Component),Ye=n(57),Xe=n(30),Qe=n(31),qe=n(51),Ke=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).state={friends:[]},n.groupMembers=[],n.groupName="",n.readFriends(),n.webId=null,n.newGroup=new We("",[]),n.nameRef=r.a.createRef(),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"readFriends",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n,a,r,i,o,s,u,c,l,d,p,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.currentSession();case 2:t=e.sent,this.webId=t.webId,n=[],a=!0,r=!1,e.prev=7,o=Object(Xe.a)(qe.default.user.friends);case 9:return e.next=11,o.next();case 11:return s=e.sent,a=s.done,e.next=15,s.value;case 15:if(u=e.sent,a){e.next=37;break}return c=u,l={},e.next=21,qe.default[c].vcard$fn;case 21:return d=e.sent,e.next=24,qe.default[c].inbox;case 24:return p=e.sent,e.next=27,qe.default[c].vcard_hasPhoto;case 27:(h=e.sent)&&h.value?l.image=h.value:l.image="",l.webId="".concat(c),l.name="".concat(d),l.inbox="".concat(p),void 0===d&&(l.name="".concat(c)),n=[].concat(Object(Ye.a)(n),[l]);case 34:a=!0,e.next=9;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(7),r=!0,i=e.t0;case 43:if(e.prev=43,e.prev=44,a||null==o.return){e.next=48;break}return e.next=48,o.return();case 48:if(e.prev=48,!r){e.next=51;break}throw i;case 51:return e.finish(48);case 52:return e.finish(43);case 53:this.setState({friends:n});case 54:case"end":return e.stop()}}),e,this,[[7,39,43,53],[44,,48,52]])})));return function(){return e.apply(this,arguments)}}()},{key:"createGroup",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("btnCreate").disabled=!0,F.b.dismiss(),t=!0,""===this.groupName&&(t=!1,F.b.error(l.t("alertName"))),this.groupMembers.length<1&&(t=!1,F.b.error(l.t("alertMembers"))),t){e.next=8;break}return document.getElementById("btnCreate").disabled=!1,e.abrupt("return",void 0);case 8:return void 0,n=new We(this.groupName,this.groupMembers),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"annotateFriend",value:function(){var e=Object(S.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.groupMembers.includes(t)?F.b.error(t.name+l.t("alertAlreadyIncluded")):(this.groupMembers.push(t),F.b.success(t.name+l.t("alertAddedSuccessfully")));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadToPod",value:function(){var e=Object(S.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.groupName=t,e.next=3,this.createGroup();case 3:if(void 0!==(n=e.sent)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,n.uploadToPod((function(e){null===e?F.b.error(l.t("alertAccessPOD")):window.location.href="#groups"}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"generateCardDecks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=[],i=0;i<=e.length;)a.push(r.a.createElement(me.a,{style:{padding:"1% 0% 1% 2%",width:"100%"}},e.slice(i,i+t).map((function(e){return n(e)})))),i+=t;return a}},{key:"render",value:function(){var e=this,t=this.generateCardDecks(this.state.friends,4,(function(t){return r.a.createElement(y.a,{style:{width:"18rem",margin:"10px",color:"black"}},r.a.createElement(y.a.Img,{variant:"top",src:t.image}),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,t.name),r.a.createElement(u.a,null,(function(n){return r.a.createElement(E.a,{variant:"success",onClick:function(){e.annotateFriend(t)}},n("groupsAdd"))}))))}));return r.a.createElement("div",{className:"App-header"},r.a.createElement(F.a,{id:"toastContainer",position:F.b.POSITION.TOP_CENTER,autoClose:5e3}),r.a.createElement("h1",null,"Select the members"),r.a.createElement("div",null,t),r.a.createElement(ae.a,{style:{margin:"1%"}},r.a.createElement(ae.a.Group,null,r.a.createElement(ae.a.Label,null,"Group name"),r.a.createElement(ae.a.Control,{type:"groupName",placeholder:"Group name",ref:this.nameRef}),r.a.createElement(u.a,null,(function(t){return r.a.createElement(E.a,{id:"btnCreate",variant:"primary",onClick:function(){e.uploadToPod(e.nameRef.current.value)}},t("groupsCreateBtn"))})))))}}]),t}(r.a.Component),$e=n(499),et=n(218),tt=n(74),nt=n(219),at=n(498),rt=n.n(at),it=n(137),ot=n.n(it),st=(n(1026),n(31)),ut=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).id=e.match.params.id,n.routeManager=e.routeManager,n.state={route:n.routeManager.getAnyRouteById(n.id)},n.fetchRouteIfNecessary(),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this;return void 0!==this.state.route?r.a.createElement("div",null,r.a.createElement(F.a,{id:"toastContainer",position:F.b.POSITION.TOP_CENTER,autoClose:5e3}),r.a.createElement(u.a,null,(function(e){return r.a.createElement("h1",{style:{padding:"1%"}},e("infoViewTitle"))})),r.a.createElement("div",{id:"routeInfoContainer"},r.a.createElement("div",{id:"routeInfoContent"},r.a.createElement("div",{id:"ircInfoTable"},r.a.createElement("div",null,r.a.createElement(de.a,{striped:!0,bordered:!0,style:{margin:"0%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(u.a,null,(function(e){return r.a.createElement("th",null,e("infoViewTh1"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement("th",null,e("infoViewTh2"))})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement(u.a,null,(function(e){return r.a.createElement("td",null,e("infoViewTd1"))})),r.a.createElement("td",null,this.state.route.getName())),r.a.createElement("tr",null,r.a.createElement(u.a,null,(function(e){return r.a.createElement("td",null,e("infoViewTd2"))})),r.a.createElement("td",null,this.state.route.getAuthor())),r.a.createElement("tr",null,r.a.createElement(u.a,null,(function(e){return r.a.createElement("td",null,e("infoViewTd3"))})),r.a.createElement("td",null,this.state.route.getDescription())),r.a.createElement("tr",null,r.a.createElement(u.a,null,(function(e){return r.a.createElement("td",null,e("infoViewTd4"))})),r.a.createElement("td",null,this.state.route.getRouteLength())))),r.a.createElement(u.a,null,(function(t){return r.a.createElement(E.a,{variant:"primary",onClick:function(){return e.downloadToClient()},style:{margin:"2%"}},t("infoViewExportJSON"))}))),r.a.createElement("div",{style:{marginTop:"2%"}},r.a.createElement(ae.a,null,r.a.createElement(ae.a.Group,null,r.a.createElement(u.a,null,(function(e){return r.a.createElement(ae.a.Label,null,e("infoViewComments"))})),r.a.createElement(u.a,null,(function(e){return r.a.createElement(ae.a.Control,{as:"textarea",rows:"3",placeholder:e("infoViewWriteComments")})}))),r.a.createElement(u.a,null,(function(e){return r.a.createElement(E.a,{variant:"primary",onClick:function(){F.b.info(l.t("infoViewCommentsNotYetImplemented"))},type:"submit"}," ",e("infoViewSubmit")," ")}))))),r.a.createElement("div",{id:"ircTabs"},r.a.createElement($e.a,null,r.a.createElement(et.a,{eventKey:"routeMap",title:l.t("infoViewMap")},r.a.createElement(ge,{route:this.state.route,movable:!0,zoom:12,style:{width:"45vw",height:"50vh",margin:"0"}})),r.a.createElement(et.a,{eventKey:"elevationChart",title:l.t("infoViewElevation")},r.a.createElement(ce,{route:this.state.route,style:{width:"100%"}})),r.a.createElement(et.a,{eventKey:"imageCarousel",title:l.t("infoViewImg")},this.getCarousel())))),r.a.createElement("div",{id:"routeCommentsList"}))):r.a.createElement("div",{id:"routeInfoContainer"},r.a.createElement(u.a,null,(function(e){return r.a.createElement("h1",{style:{padding:"1%"}},e("infoViewTitle"))})))}},{key:"downloadToClient",value:function(){var e=this.state.route.toJsonLd(),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),a=document.createElement("a");a.download=this.state.route.getName()+"_"+this.state.route.getId()+".json",a.href=n,a.click()}},{key:"fetchRouteIfNecessary",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.id||0!==this.routeManager.getRoutes().length||void 0!==this.state.route){e.next=5;break}return e.next=3,st.currentSession();case 3:null!==(t=e.sent)&&void 0!==t&&new Z(t).getRoutes((function(e,t){if(null===e)F.b.error(l.t("alertUnableToRetrieveRoute"));else if(e.includes(n.id)){var a=new $("","","",[]);a.modifyFromJsonLd(e),n.setState({route:a})}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCarousel",value:function(){var e=[];return this.state.route.media.map((function(e){return e.podURL})).forEach((function(t){e.push(r.a.createElement(tt.a.Item,{key:t},r.a.createElement(nt.a,{src:t,fluid:!0})))})),0===e.length&&(e.push(r.a.createElement(tt.a.Item,{key:"logo1"},r.a.createElement(nt.a,{src:rt.a,fluid:!0}))),e.push(r.a.createElement(tt.a.Item,{key:"logo2"},r.a.createElement(nt.a,{src:ot.a,fluid:!0})))),r.a.createElement(tt.a,null,e)}}]),t}(r.a.Component),ct=n(209),lt=n.n(ct),dt=n(210),pt=n.n(dt),ht=new(function(){function e(){Object(R.a)(this,e),this.groups=[]}return Object(C.a)(e,[{key:"getGroups",value:function(){return this.groups}},{key:"getGroupById",value:function(e){return this.groups.find((function(t){return t.getId()===e}))}},{key:"addGroup",value:function(e){this.groups.push(e)}},{key:"resetGroups",value:function(){this.groups=[]}}]),e}()),mt=n(23),ft=n(1027),vt=n(31),gt=ft.AclApi,bt=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).podStoreHandler=new Z(e),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"unshareRouteAndResources",value:function(){var e=Object(S.a)(O.a.mark((function e(t,n){var a,r,i=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.repository+this.defaultFolder+this.routesDirectory+t,r=ft.Permissions.READ,this.podStoreHandler.getFile(a).then((function(e){i._processRouteFileForUnshare(e,r,n)}),(function(e){})),e.next=5,this.unshareFile(a,r,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"shareRouteAndResources",value:function(){var e=Object(S.a)(O.a.mark((function e(t,n){var a,r,i=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.repository+this.defaultFolder+this.routesDirectory+t,r=ft.Permissions.READ,this.podStoreHandler.getFile(a).then((function(e){i._processRouteFileForShare(e,r,n)}),(function(e){})),e.next=5,this.shareFile(a,r,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"shareFile",value:function(){var e=Object(S.a)(O.a.mark((function e(t,n,a){var r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt.fetch.bind(vt),i=new gt(r,{autoSave:!0}),e.next=4,i.loadFromFileUrl(t);case 4:return o=e.sent,e.prev=5,e.next=8,o.addRule(n,a);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),e.t0;case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"unshareFile",value:function(){var e=Object(S.a)(O.a.mark((function e(t,n,a){var r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt.fetch.bind(vt),i=new gt(r,{autoSave:!0}),e.next=4,i.loadFromFileUrl(t);case 4:return o=e.sent,e.prev=5,e.next=8,o.deleteRule(n,a);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),e.t0;case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"_processRouteFileForShare",value:function(e,t,n){try{for(var a=JSON.parse(e).media.map((function(e){return e["@id"]})),r=0;r<a.length;r++)this.shareFile(a[r],t,n)}catch(i){}}},{key:"_processRouteFileForUnshare",value:function(e,t,n){try{for(var a=JSON.parse(e).media.map((function(e){return e["@id"]})),r=0;r<a.length;r++)this.unshareFile(a[r],t,n)}catch(i){}}}]),t}(J),yt=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this))).groupManager=ht,n.state={friends:[],groups:[]},n.processedGroups=0,n.retrievedGroups=0,n.readFriends(),n.syncGroupsWithPod(),n.webId=null,n.id=e.match.params.id,n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.generateCardDecks(this.state.friends,4,(function(t){return r.a.createElement(y.a,{style:{width:"18rem",margin:"10px",color:"black"}},r.a.createElement(y.a.Img,{variant:"top",src:t.image}),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,t.name),r.a.createElement(E.a,{variant:"primary",onClick:function(){e.send(t.inbox)}},l.t("share"))))})),n=this.generateCardDecks(this.state.groups,4,(function(t){return r.a.createElement(y.a,{style:{width:"18rem",margin:"10px",color:"black"}},r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,t.name),t.users.map((function(e){return r.a.createElement(y.a.Text,null,e.name)})),r.a.createElement(E.a,{variant:"primary",onClick:function(){e.sendToGroup(t.users)}},l.t("share"))))}));return r.a.createElement("div",null,r.a.createElement(F.a,{position:F.b.POSITION.TOP_CENTER,autoClose:5e3}),r.a.createElement("h2",{style:{padding:"1%"}},l.t("friendsTitle")),t,r.a.createElement("h2",{style:{padding:"1%"}},l.t("grupos")),n)}},{key:"generateCardDecks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=[],i=0;i<=e.length;)a.push(r.a.createElement(me.a,{style:{padding:"1% 0% 1% 2%",width:"100%"}},e.slice(i,i+t).map((function(e){return n(e)})))),i+=t;return a}},{key:"readFriends",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n,a,r,i,o,s,u,c,l,d,p,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.currentSession();case 2:t=e.sent,this.webId=t.webId,n=[],a=!0,r=!1,e.prev=7,o=Object(Xe.a)(qe.default.user.friends);case 9:return e.next=11,o.next();case 11:return s=e.sent,a=s.done,e.next=15,s.value;case 15:if(u=e.sent,a){e.next=37;break}return c=u,l={},e.next=21,qe.default[c].vcard$fn;case 21:return d=e.sent,e.next=24,qe.default[c].inbox;case 24:return p=e.sent,e.next=27,qe.default[c].vcard_hasPhoto;case 27:(h=e.sent)&&h.value?l.image=h.value:l.image="",l.webId="".concat(c),l.name="".concat(d),l.inbox="".concat(p),void 0===d&&(l.name="".concat(c)),n=[].concat(Object(Ye.a)(n),[l]);case 34:a=!0,e.next=9;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(7),r=!0,i=e.t0;case 43:if(e.prev=43,e.prev=44,a||null==o.return){e.next=48;break}return e.next=48,o.return();case 48:if(e.prev=48,!r){e.next=51;break}throw i;case 51:return e.finish(48);case 52:return e.finish(43);case 53:this.setState({friends:n});case 54:case"end":return e.stop()}}),e,this,[[7,39,43,53],[44,,48,52]])})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(S.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n={}).date=new Date(Date.now()),n.id=n.date.getTime(),n.sender=this.webId,n.recipient=t,"viade/routes/",n.content=this.getWebIdWithoutProfile()+"viade/routes/"+this.id+".json",n.title="Check out this route shared to you by "+this.getSessionName(),n.url=n.recipient+n.id+".json",e.next=12,this.buildMessage(n);case 12:F.b.success(l.t("alertSuccessInPermissions")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),F.b.error(l.t("alertErrorInPermissions"));case 18:this.changePermissions(this.id+".json",[t.split("inbox")[0]+"profile/card#me"]);case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"changePermissions",value:function(){var e=Object(S.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.currentSession();case 2:return a=e.sent,r=new bt(a),e.next=6,r.shareRouteAndResources(t,n);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildMessage",value:function(){var e=Object(S.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,qe.default[n].schema$text.add(t.content);case 3:return e.next=5,qe.default[n].rdfs$label.add("routeShared: "+t.title);case 5:return e.next=7,qe.default[n].schema$dateSent.add(t.date.toISOString());case 7:return e.next=9,qe.default[n].rdf$type.add(Object(mt.namedNode)("https://schema.org/Message"));case 9:return e.next=11,qe.default[n].schema$sender.add(Object(mt.namedNode)(this.webId));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSessionName",value:function(){return this.webId.split(".")[0].split("//")[1]}},{key:"getWebIdWithoutProfile",value:function(){return this.webId.split("profile")[0]}},{key:"syncGroupsWithPod",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.groupManager.resetGroups(),e.next=3,Qe.currentSession();case 3:null!==(t=e.sent)&&void 0!==t&&new Z(t).getGroups((function(e,t){if(null===e)F.b.error(l.t("alertAccessPOD"));else if(0!==e.length)try{var a=new We("",[]);a.modifyFromJsonLd(JSON.parse(e)),n.groupManager.addGroup(a);var r=n.state.groups;r.push(a),n.processedGroups+=1,n.processedGroups===n.retrievedGroups&&(n.setState({groups:r}),Ee()("#messageArea").empty())}catch(t){}})).then((function(e){0===e?n.setState({message:r.a.createElement("div",null,r.a.createElement("h3",null,l.t("messageNoGroups")),r.a.createElement("p",null,l.t("messageNoGroupsCreateOne")))}):n.retrievedGroups=e}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendToGroup",value:function(e){var t=this;e.forEach((function(e){t.send(e.inbox)}))}}]),t}(r.a.Component),Et=n(31),wt=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(j.a)(this,Object(I.a)(t).call(this,e))).routeManager=we,n.cardDeckSize=4,n.state={sharedRoutes:[],spinnerHidden:!1},n.readInbox(),void 0!==e.sync&&!0!==e.sync||(n.syncRoutesWithPod().then((function(){n.state.spinnerHidden=!0})),n.retrievedRoutes=!1),n}return Object(P.a)(t,e),Object(C.a)(t,[{key:"readInbox",value:function(){var e=Object(S.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Z,e.next=3,Et.currentSession();case 3:e.t1=e.sent,new e.t0(e.t1).checkInbox();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=[],n=0;n<=this.state.sharedRoutes.length;)t.push(r.a.createElement(me.a,{style:{padding:"1% 0% 1% 2%",width:"100%"}},this.state.sharedRoutes.slice(n,n+this.cardDeckSize).map((function(e){return r.a.createElement(be,{route:e,showShareButton:!1})})))),n+=this.cardDeckSize;return r.a.createElement("div",null,r.a.createElement(F.a,{position:F.b.POSITION.TOP_CENTER,autoClose:5e3}),r.a.createElement("div",{id:"title",style:{display:"inline"}},r.a.createElement("h1",{style:{margin:"2%",display:"inline"}},l.t("sharedRouteListTitle")),r.a.createElement(E.a,{style:{display:"inline",float:"right",margin:"2%"},variant:"danger",onClick:function(){window.confirm("Are you sure?")&&e.cleanSharedFolder()}},"Clean files shared to you")),r.a.createElement("h2",{style:{padding:"1%"},hidden:this.state.spinnerHidden},l.t("routeListLoadingMessage")),r.a.createElement(N.a,{id:"spinner",hidden:this.state.spinnerHidden,animation:"border"}),t,r.a.createElement("div",{id:"messageArea"},this.state.message))}},{key:"cleanSharedFolder",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.currentSession();case 2:t=e.sent,new Z(t)._eliminateSharedFolder(),F.b.success(l.t("alertRoutesRemoved")),this.syncRoutesWithPod();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"syncRoutesWithPod",value:function(){var e=Object(S.a)(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.routeManager.resetRoutes(),e.next=3,Et.currentSession();case 3:null!==(t=e.sent)&&void 0!==t&&new Z(t).getRoutesSharedToMe((function(e,t,a){if(null===e)F.b.error(l.t("alertUnavailableRoutes"));else if(0!==e.length){var r=new $("","","",[]);r.modifyFromJsonLd(e),n.routeManager.addSharedRoute(r);var i=n.state.sharedRoutes;i.push(r),a&&!n.retrievedRoutes&&(n.setState({sharedRoutes:i,spinnerHidden:!0}),Ee()("#messageArea").empty())}})).then((function(e){e?n.retrievedRoutes=!0:n.setState({message:r.a.createElement("div",null,r.a.createElement("h3",null,l.t("sharedRouteListOoopsTitle")),r.a.createElement("p",null,l.t("sharedRouteListOoopsParagraph")))})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.Component),kt=we,xt=ht;var Ot=function(e){var t=Object(u.c)(),n=t.t,a=t.i18n,i=function(e){a.changeLanguage(e)};return r.a.createElement(g.a,{basename:"/"},r.a.createElement(d.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(d.a.Brand,{href:"#home"},r.a.createElement("img",{src:ot.a,width:"40",height:"40",className:"d-inline-block",alt:"Viade logo"}),r.a.createElement("img",{src:pt.a,width:"140",height:"40",className:"d-inline-block",alt:"Viade text"})),r.a.createElement(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(h.a,{title:n("navBarProfile"),id:"collapsible-nav-dropdown"},r.a.createElement(h.a.Item,{id:"profileNavButton",href:"#profile"},n("navBarMyProfile")),r.a.createElement(h.a.Item,{href:"#groups"},n("navBarGroups"))),r.a.createElement(h.a,{title:n("navBarRoutes"),id:"collapsible-nav-dropdown"},r.a.createElement(h.a.Item,{id:"routeListNavButton",href:"#routes/list"},n("navBarMyRoutes")),r.a.createElement(h.a.Item,{id:"routeAddNavButton",href:"#routes/add"},n("navBarCreateRoute")),r.a.createElement(h.a.Divider,null),r.a.createElement(h.a.Item,{id:"routeSharedNavButton",href:"#routes/shared"},n("navBarSharedRoutes")),r.a.createElement(h.a.Divider,null),r.a.createElement(h.a.Item,{href:"#routes/example"},n("navBarRouteHelp")))),r.a.createElement(m.a,{style:{margin:"16px"},id:"dropdown-item-button",variant:"secondary",title:n("navBarLanguage")},r.a.createElement(f.a.Item,{as:"button",onClick:function(){return i("en")}},n("navBarLanguageEn")),r.a.createElement(f.a.Item,{as:"button",onClick:function(){return i("es")}},n("navBarLanguageEs"))),r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"btn btn-outline-light",popup:"https://solid.community/common/popup.html",login:n("navBarSignIn"),logout:n("navBarSignOut")}),r.a.createElement(p.a.Link,{href:"https://github.com/Arquisoft/viade_en3a",target:"_blank"},r.a.createElement("img",{src:lt.a,width:"30",height:"30",className:"d-inline-block align-top",alt:"GitHub link"}))))),r.a.createElement(b.b,{exact:!0,path:"/register",component:k}),r.a.createElement(b.b,{exact:!0,path:"/routes/add",render:function(){return r.a.createElement(he,{routeManager:kt})}}),r.a.createElement(b.b,{exact:!0,path:"/routes/list",render:function(){return r.a.createElement(xe,{routeManager:kt})}}),r.a.createElement(b.b,{exact:!0,path:"/routes/shared",render:function(){return r.a.createElement(wt,{routeManager:kt})}}),r.a.createElement(b.b,{exact:!0,path:"/routes/example",render:function(){return r.a.createElement(Ae,null)}}),r.a.createElement(b.b,{exact:!0,path:"/home",component:De}),r.a.createElement(b.b,{exact:!0,path:"/profile",render:function(){return r.a.createElement(Ve,{routeManager:kt})}}),r.a.createElement(b.b,{exact:!0,path:"/groups",render:function(){return r.a.createElement(Ze,{groupManager:xt})}}),r.a.createElement(b.b,{exact:!0,path:"/createGroup",component:Ke}),r.a.createElement(b.b,{exact:!0,path:"/routes/info/:id",render:function(e){return r.a.createElement(ut,Object.assign({routeManager:kt},e))}}),r.a.createElement(b.b,{exact:!0,path:"/routes/share/:id",render:function(e){return r.a.createElement(yt,e)}}),r.a.createElement(b.a,{path:"/",exact:!0,to:"/home"}))},St=n(506),Rt=n.n(St),Ct=n(507),jt=n.n(Ct),It={height:"93vh"},Pt={width:"100%",height:"100%"};var Nt=function(e){var t=Object(u.c)().t;return r.a.createElement(tt.a,{style:It},r.a.createElement(tt.a.Item,{style:It},r.a.createElement("img",{className:"d-block w-100",src:Rt.a,alt:"First slide",style:Pt}),r.a.createElement(tt.a.Caption,null,r.a.createElement("h3",null,t("carouselWelcome")),r.a.createElement("p",null,t("carouselText1")))),r.a.createElement(tt.a.Item,{style:It},r.a.createElement("img",{className:"d-block w-100",src:jt.a,alt:"Second slide",style:Pt}),r.a.createElement(tt.a.Caption,null,r.a.createElement("h3",null,t("carouselText2")),r.a.createElement("p",null,t("carouselText3")))))};var Ft=function(e){var t=Object(u.c)(),n=t.t,a=t.i18n,i=function(e){a.changeLanguage(e)};return r.a.createElement(g.a,{basename:"/"},r.a.createElement(d.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(d.a.Brand,{href:"#"},r.a.createElement("img",{src:ot.a,width:"40",height:"40",className:"d-inline-block align-top",alt:"Viade logo"}),r.a.createElement("img",{src:pt.a,width:"140",height:"40",className:"d-inline-block align-top",alt:"Viade logo"})),r.a.createElement(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"}),r.a.createElement(m.a,{id:"dropdown-item-button",style:{margin:"16px"},variant:"secondary",title:n("navBarLanguage")},r.a.createElement(f.a.Item,{as:"button",onClick:function(){return i("en")}},n("navBarLanguageEn")),r.a.createElement(f.a.Item,{as:"button",onClick:function(){return i("es")}},n("navBarLanguageEs"))),r.a.createElement(p.a,null,r.a.createElement(p.a.Link,{className:"mt-1 mr-2",href:"#/register"},n("navBarSignUp")),r.a.createElement(v.a,{className:"btn btn-outline-light",popup:"https://solid.community/common/popup.html",login:n("navBarSignIn"),logout:n("navBarSignOut")}),r.a.createElement(p.a.Link,{href:"https://github.com/Arquisoft/viade_en3a",target:"_blank"},r.a.createElement("img",{src:lt.a,width:"30",height:"30",className:"d-inline-block align-top",alt:"GitHub link"}))))),r.a.createElement("div",{id:"container",style:{backgroundColor:"#282c34"}},r.a.createElement(b.b,{exact:!0,path:"/register",component:k}),r.a.createElement(b.b,{exact:!0,path:"/",component:Nt})))},Tt=n(1046),At=n(1043);var Lt=function(){return r.a.createElement("div",{className:"App",ref:function(e){e&&e.style.setProperty("background-color","white","important")}},r.a.createElement(g.a,{basename:"/"},r.a.createElement(Tt.a,null,r.a.createElement(Ft,null)),r.a.createElement(At.a,null,r.a.createElement(Ot,null))))};n(1029),n(1030);o.a.render(r.a.createElement(Lt,null),document.getElementById("root"))},137:function(e,t,n){e.exports=n.p+"static/media/logo_alt.bdb0bd56.jpeg"},148:function(e,t,n){},209:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII="},210:function(e,t,n){e.exports=n.p+"static/media/logo_letters.c6e6636f.jpeg"},277:function(e,t,n){e.exports=n.p+"static/media/iconNormal.7350e1f9.svg"},278:function(e,t,n){e.exports=n.p+"static/media/iconEdited.4bb0f0c0.svg"},491:function(e,t,n){e.exports=n.p+"static/media/main.06374f03.png"},492:function(e,t,n){e.exports=n.p+"static/media/newRouteList.0a843bdf.png"},493:function(e,t,n){e.exports=n.p+"static/media/Screenshot_1.5c6dfa65.png"},494:function(e,t,n){e.exports=n.p+"static/media/routeDetails.2a1e5f72.png"},495:function(e,t,n){e.exports=n.p+"static/media/Screenshot_4.36cf0ace.png"},496:function(e,t,n){e.exports=n.p+"static/media/logo_full.ddf87e7e.jpeg"},497:function(e,t,n){e.exports=n.p+"static/media/logo_old.7e2fd075.jpeg"},498:function(e,t,n){e.exports=n.p+"static/media/logo.7e2fd075.jpeg"},506:function(e,t,n){e.exports=n.p+"static/media/car_img1.774f104c.jpeg"},507:function(e,t,n){e.exports=n.p+"static/media/car_img2.67c42e97.jpg"},510:function(e,t,n){e.exports=n(1031)},524:function(e,t,n){e.exports=n.p+"static/media/iconSelected.808b19f1.svg"},531:function(e,t){},533:function(e,t){},586:function(e,t){},633:function(e,t){},634:function(e,t){},822:function(e,t){},823:function(e,t){},913:function(e,t){},915:function(e,t){}},[[510,1,2]]]);
//# sourceMappingURL=main.f44a17c1.chunk.js.map